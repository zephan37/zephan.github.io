<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>git使用 | 南树的个人博客</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="安装在不同系统下都可以安装，因为git是分布式版本管理系统，所以每台机器必须自报家门：名字与email地址。 12git config --global user.name &quot;name&quot;git config --global user.email &quot;xxx@xxx.com&quot;    版本库（respository）仓库（本地）其本质就是一个文件目录，目录里面的">
<meta property="og:type" content="article">
<meta property="og:title" content="git使用">
<meta property="og:url" content="http://example.com/2023/01/03/git%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="南树的个人博客">
<meta property="og:description" content="安装在不同系统下都可以安装，因为git是分布式版本管理系统，所以每台机器必须自报家门：名字与email地址。 12git config --global user.name &quot;name&quot;git config --global user.email &quot;xxx@xxx.com&quot;    版本库（respository）仓库（本地）其本质就是一个文件目录，目录里面的">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-01-03T12:43:21.000Z">
<meta property="article:modified_time" content="2023-04-08T14:19:09.422Z">
<meta property="article:author" content="Zephan ly">
<meta property="article:tag" content="技术学习">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="南树的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">Zephan ly</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="mail" target="_blank" href="/zephanly37@gmail.com" title="mail">mail</a>
					        
						</div>
						<!-- music -->
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/FreeBSD-Linux-Unix/" style="font-size: 10px;">FreeBSD Linux Unix</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">技术学习</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">游戏开发 技术学习</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/">github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">霞落见星月，雾影观曦光.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="mail" target="_blank" href="/zephanly37@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-git使用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/01/03/git%E4%BD%BF%E7%94%A8/" class="article-date">
  	<time datetime="2023-01-03T12:43:21.000Z" itemprop="datePublished">2023-01-03</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      git使用
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/" rel="tag">技术学习</a></li></ul>
	</div>

        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>在不同系统下都可以安装，因为git是分布式版本管理系统，所以每台机器必须自报家门：名字与email地址。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;name&quot;</span><br><span class="line">git config --global user.email &quot;xxx@xxx.com&quot;</span><br></pre></td></tr></table></figure>



<h1 id="版本库（respository）仓库（本地）"><a href="#版本库（respository）仓库（本地）" class="headerlink" title="版本库（respository）仓库（本地）"></a>版本库（respository）仓库（本地）</h1><p>其本质就是一个文件目录，目录里面的文件会被git管理。</p>
<p>在电脑上的一个文件目录内，输入：</p>
<p><code>git init</code></p>
<p>即可把目录建成一个仓库。</p>
<p>在目录下的文件需要分两步才能添加到仓库：</p>
<p>第一步，</p>
<p><code>git add &lt;file&gt;</code>，实际上是把文件存到暂存区；</p>
<p>第二步，</p>
<p><code>git commit -m &lt;message&gt;</code>，将暂存区的所有文件添加到仓库，-m是直到该次提交的描述内容。</p>
<h1 id="时光机穿梭（版本回退）"><a href="#时光机穿梭（版本回退）" class="headerlink" title="时光机穿梭（版本回退）"></a>时光机穿梭（版本回退）</h1><p>查看仓库的当前状态，要善用这个命令。</p>
<p><code>git status</code></p>
<p>查看当前文件修改了什么</p>
<p><code>git diff &lt;file&gt;</code></p>
<p>版本回退</p>
<p>文件添加到仓库的第二步是commit提交，每一次commit可以理解为一次存档，和游戏一样，打不过就读档，在打boss前就存档（commit）。当文件错乱时，可以随时回到上一次commit的状态，所以也称版本回退。</p>
<p><code>git log</code> 可以显示从远到近的提交，其会显示一大串乱七八糟的字符串id，这个是commit_id，用来唯一标识每一次commit。</p>
<p>如何使用版本回退</p>
<p>回到过去有两种方式：</p>
<p>第一种：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^		（HEAD------当前版本）</span><br><span class="line">													（HEAD^-----上版本commit）</span><br><span class="line">													（HEAD^^-----上上版本commit）</span><br><span class="line">													（HEAD~100---上一百次）</span><br></pre></td></tr></table></figure>

<p>第二种：</p>
<p>每次commit都有一个commit_id，可以直接用：</p>
<p><code>git reset --hard &lt;commit_id&gt;</code>直接回退到某次commit。</p>
<p>回到未来</p>
<p>通过使用版本回退到之前版本后，现在我想回到未来，此时会发现 <code>git log</code>会发现未来的commit都不见了，用时光机来形容这种情况真是很贴切。那么我怎么回到未来呢？好在时光机已经把穿越记录给记录好了，此时使用</p>
<p><code>git reflog</code> 即可查看包括过去和未来所有的commit_id，用了id即可使用<code>git reset --hard &lt;commit_id&gt;</code>穿越回未来了。</p>
<h1 id="工作区和暂存区"><a href="#工作区和暂存区" class="headerlink" title="工作区和暂存区"></a>工作区和暂存区</h1><p>工作区就是我们的目录</p>
<p>![image-20230103212125356](&#x2F;Users&#x2F;zephan&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20230103212125356.png)</p>
<p>上图可看出</p>
<p><code>git add &lt;file&gt;</code> 实际上就是把文件从工作区加入暂存区stage</p>
<p><code>git commit</code> 实际上就是把文件从暂存区存入分支，一次性全部提交</p>
<h1 id="管理修改"><a href="#管理修改" class="headerlink" title="管理修改"></a>管理修改</h1><p>对工作区内的文件进行以下操作：</p>
<p>第一次修改—–&gt;git add—–&gt;第二次修改—–&gt;git commit</p>
<p>会发现commit后的修改上第一次修改的内容，因为commit只会提交暂存区的文件，所以未add入暂存区的第二次修改当然不会被提交。</p>
<h1 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h1><p>撤销修改的命令是：</p>
<p><code>git checkout -- file</code></p>
<p>情况一：工作区修改但是未add到暂存区（即丢弃工作区修改）</p>
<p>​			<code>git checkout -- file</code>	会使工作区文件修改撤销</p>
<p>情况二：工作区修改且已add到暂存区</p>
<p>​			<code>git checkout -- file</code>	会使工作区文件回到add时的状态</p>
<p>情况三：工作区已修改且已add到暂存区，但未commit</p>
<p>​			<code>git reset HEAD file</code> 可以把暂存区修改撤销，回到工作区</p>
<p>使用场景：</p>
<p>情况一：乱改工作区内容，想直接撤销修改，用<code>git checkout -- file</code>即可</p>
<p>情况二：不但乱改了工作区内容，且已经commit到暂存区了，分两步，一是先用<code>git reset HEAD file</code>回到情况一的状态，二是如情况一处理即可。</p>
<p>情况三：已经commit了修改，想要撤销时，版本回退即可。</p>
<h1 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h1><p>如果我们将工作区内的某个文件删除，有两种情况：</p>
<p>一：确实要删，因为工作区与仓库之间已经不一样了，所以仓库也的删掉，分两步。先是使用 <code>git rm file</code>删除工作区文件，该命令还会一同将修改add到暂存区，然后使用commit提交，使仓库也删掉该文件。</p>
<p>二：误删工作区文件，简单，使用<code>git checkout -- file</code>恢复工作区即可。</p>
<h1 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h1><p>前文提到的均是在本地仓库的操作，现在若我们有一个远程的git服务器，我们大概率想本地和服务端关联起来。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@server-name:path/repo-name.git</span><br><span class="line">origin---是给远程仓库指定的名字</span><br><span class="line">git@server-name:path/repo-name.git---是服务端仓库的名字</span><br></pre></td></tr></table></figure>

<p>现在两边库已经关联起来了，第一推送可用 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br><span class="line">-u不但会把本地master分支推送到新的master分支，还会把两部分关联起来</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u &lt;给远程仓库制定的名字&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</span><br></pre></td></tr></table></figure>

<p>此后推送可用：<code>git push origin master即可</code></p>
<p>删除远程仓库</p>
<p>先用 <code>git remote -v</code>查看远程库信息</p>
<p>再用 <code>git remote rm &lt;name&gt;</code>即可删除远程仓库</p>
<p>拉取远程仓库的内容</p>
<p>情况一：<code>git clone git@server-name:xxx/xxx.git</code>	即可拉取任意一个远程库</p>
<p>情况二：<code>git pull &lt;给远程仓库制定的仓库名&gt; &lt;远程分支&gt;:&lt;本地分支&gt;</code> 即可拉取已经关联的远程库内容</p>
<h1 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h1><p>commit理解为时光机，分支可理解为平行宇宙</p>
<p>前文提到的master就是主宇宙，我们每次commit都会在该宇宙中生成一次时间节点，就像这样</p>
<p>Commit1——–commit2———-commit3———–commit4————-HEAD</p>
<p>如上就是master分支的所有commit</p>
<p>然后现在在commit3时间节点处，我们想去开发新功能但是又不影响到主宇宙master，那我们可以在该时间节点创造一个平行宇宙dev去实现新功能，就像这样：</p>
<p>Commit1——–commit2———-commit3———–commit4————-commit5（这条是主宇宙分支master）</p>
<p>​                                                              I</p>
<p>​															  I</p>
<p>​                                                              I————– commit4—————commit5————HEAD	(这条分支是dev)</p>
<p>HEAD指向当前所处的宇宙分支。</p>
<p>当我们现在所处dev宇宙，那么我们怎么回到主宇宙master，或者说怎么创建一个一个分支呢？</p>
<p><code>git checkout -b dev</code>	该命令可以创建dev宇宙并切换到它，其相当于</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch dev ----创建dev宇宙</span><br><span class="line">git checkout dev	----切换到dev宇宙(因为checkout易于版本回退的checkout搞混，因此建议使用git switch dev来切换宇宙)</span><br></pre></td></tr></table></figure>



<p>假设我们现在已经创建了很多分支，但怎么知道</p>
<p>可以使用 <code>git branch</code>列出所有的分支</p>
<p>假设现在在dev分支已经完成了新功能，现在要将它添加入主宇宙，这就是分支合并，用</p>
<p><code>git merge dev</code> 即可将dev合并，现在主宇宙也具有dev分支的功能了。</p>
<p>合并后即可删除分支宇宙dev</p>
<p><code>git branch -d dev</code></p>
<p>解决冲突</p>
<p>如下分支图</p>
<p>Commit1——–commit2———-commit3———–commit4————-commit5（这条是主宇宙分支master）</p>
<p>​                                                              I</p>
<p>​															  I</p>
<p>​                                                              I————– commit4—————HEAD	(这条分支是dev)</p>
<p>在dev分支完成功能后，现在想将dev合并入主宇宙，但是主宇宙master在commit3后，有人又进行了commit4与5提交，此时从commit3开始，两个宇宙分别进行了各自的修改，这种情况下想合并两个宇宙就会出现冲突，必须手动解决冲突后才能进行合并。</p>
<p>使用 <code>git log --graph</code>即可看到分支合并图</p>
<h1 id="分支管理策略"><a href="#分支管理策略" class="headerlink" title="分支管理策略"></a>分支管理策略</h1><p>前文提到出现冲突时需要手动修改放可合并，</p>
<p>若无冲突时，合并会默认使用快速模式，即fast forward，这种模式下，删除分支后会丢掉分支信息，所以我们可以强制禁用该模式，禁用后会在合并时生成一个新的commit，如下：</p>
<p><code>git merge --no-ff -m &quot;message&quot; dev</code></p>
<p>分支策略原则</p>
<p>master或main分支非常稳定，禁用来发布新版本，平时不能在上面干活，应该在dev上干活。每个人都有自己的分支，并时不时向master合并即可。</p>
<p>bug分支</p>
<p>修复某个bug时，我们会通过创建新的bug分支去修复bug。</p>
<p>但若当前工作未完成，也无从提交，可以先把工作现场用 <code>git stash</code>进行保存，然后去修复bug，修复后使用 <code>git stash pop</code>回到现场。</p>
<p>在master分支上提交的修复的bug，想要合并到自己的dev分支上，可用</p>
<p><code>git cherry-pick &lt;commit&gt;</code>命令，将bug修复复制到自己当前的dev分支上。</p>
<p>feature分支</p>
<p>开发一个新功能，最好是新建一个feature分支，但若开发完成且未合并，想要删除feature，可用：</p>
<p><code>git branch -D &lt;name&gt;</code>强行删除</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/03/21/Godot%E6%96%87%E6%A1%A3%E5%AD%A6%E4%B9%A0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          Godot文档学习
        
      </div>
    </a>
  
  
    <a href="/2023/01/02/%E8%87%AA%E7%94%A8FreeBSD%E9%85%8D%E7%BD%AE/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">自用FreeBSD配置</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>






</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2023 Zephan ly
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
</body>
</html>